(this["webpackJsonpreact-pokemons-app"]=this["webpackJsonpreact-pokemons-app"]||[]).push([[0],{24:function(e,a,t){e.exports=t(34)},29:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(21),l=t.n(c),o=t(4),s=(t(29),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}),i=function(e){var a;switch(e){case"Feu":a="red lighten-1";break;case"Eau":a="blue lighten-1";break;case"Plante":a="green lighten-1";break;case"Insecte":a="brown lighten-1";break;case"Normal":a="grey lighten-3";break;case"Vol":a="blue lighten-3";break;case"Poison":a="deep-purple accent-1";break;case"F\xe9e":a="pink lighten-4";break;case"Psy":a="deep-purple darken-2";break;case"Electrik":a="lime accent-1";break;case"Combat":a="deep-orange";break;default:a="grey"}return"chip ".concat(a)},m=t(3),u=function(e){var a=e.pokemon,t=e.borderColor,c=void 0===t?"#009688":t,l=Object(n.useState)(),u=Object(o.a)(l,2),d=u[0],p=u[1],v=Object(m.g)();return r.a.createElement("div",{className:"col s6 m4",onClick:function(){return e=a.id,void v.push("/pokemons/".concat(e));var e},onMouseEnter:function(){p(c)},onMouseLeave:function(){p("#f5f5f5")}},r.a.createElement("div",{className:"card horizontal",style:{borderColor:d}},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:a.picture,alt:a.name})),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("p",null,a.name),r.a.createElement("p",null,r.a.createElement("small",null,s(a.created))),a.types.map((function(e){return r.a.createElement("span",{key:e,className:i(e)},e)}))))))},d=t(11),p=t(13),v=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"getPokemons",value:function(){var e=this;return fetch("http://localhost:3001/pokemons").then((function(e){return e.json()})).catch((function(a){return e.handleError(a)}))}},{key:"getPokemon",value:function(e){var a=this;return fetch("http://localhost:3001/pokemons/".concat(e)).then((function(e){return e.json()})).then((function(e){return a.isEmpty(e)?null:e})).catch((function(e){return a.handleError(e)}))}},{key:"updatePokemon",value:function(e){var a=this;return fetch("http://localhost:3001/pokemons/".concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return a.handleError(e)}))}},{key:"addPokemon",value:function(e){var a=this;return delete e.created,fetch("http://localhost:3001/pokemons",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return a.handleError(e)}))}},{key:"deletePokemon",value:function(e){var a=this;return fetch("http://localhost:3001/pokemons/".concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){return a.handleError(e)}))}},{key:"searchPokemon",value:function(e){var a=this;return fetch("http://localhost:3001/pokemons?q=".concat(e)).then((function(e){return e.json()})).catch((function(e){return a.handleError(e)}))}},{key:"isEmpty",value:function(e){return 0===Object.keys(e).length}},{key:"handleError",value:function(e){console.error(e)}}]),e}(),h=t(6),E=function(){var e=Object(n.useState)(""),a=Object(o.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)([]),s=Object(o.a)(l,2),i=s[0],m=s[1];return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m6 offset-m3"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{type:"text",placeholder:"Rechercher un pok\xe9mon",value:t,onChange:function(e){return function(e){var a=e.target.value;c(a),a.length<=1?m([]):v.searchPokemon(a).then((function(e){return m(e)}))}(e)}})),r.a.createElement("div",{className:"collection"},i.map((function(e){return r.a.createElement(h.b,{key:e.id,to:"/pokemons/".concat(e.id),className:"collection-item"},e.name)})))))))},f=function(){var e=Object(n.useState)([]),a=Object(o.a)(e,2),t=a[0],c=a[1];return Object(n.useEffect)((function(){v.getPokemons().then((function(e){return c(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h1",{className:"center"},"Pok\xe9dex"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement(E,null),t.map((function(e){return r.a.createElement(u,{key:e.id,pokemon:e})}))),r.a.createElement(h.b,{className:"btn-floating btn-large waves-effect waves-light blue z-depth-3",style:{position:"fixed",bottom:"25px",right:"25px"},to:"/pokemons/add"},r.a.createElement("i",{className:"material-icons"},"add"))))},b=function(){return r.a.createElement("div",{className:"preloader-wrapper big active"},r.a.createElement("div",{className:"spinner-layer spinner-blue"},r.a.createElement("div",{className:"circle-clipper left"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"gap-patch"},r.a.createElement("div",{className:"circle"})),r.a.createElement("div",{className:"circle-clipper right"},r.a.createElement("div",{className:"circle"}))))},g=function(e){var a=e.match,t=Object(n.useState)(null),c=Object(o.a)(t,2),l=c[0],m=c[1];return Object(n.useEffect)((function(){v.getPokemon(+a.params.id).then((function(e){return m(e)}))}),[a.params.id]),r.a.createElement("div",null,l?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m8 offset-m2"},r.a.createElement("h2",{className:"header center"},l.name),r.a.createElement("div",{className:"card hoverable"},r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:l.picture,alt:l.name,style:{width:"250px",margin:"0 auto"}}),r.a.createElement(h.b,{to:"/pokemons/edit/".concat(l.id),className:"btn-floating halfway-fab waves-effect waves-light"},r.a.createElement("i",{className:"material-icons"},"edit"))),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},r.a.createElement("table",{className:"bordered striped"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Nom"),r.a.createElement("td",null,r.a.createElement("strong",null,l.name))),r.a.createElement("tr",null,r.a.createElement("td",null,"Points de vie"),r.a.createElement("td",null,r.a.createElement("strong",null,l.hp))),r.a.createElement("tr",null,r.a.createElement("td",null,"D\xe9g\xe2ts"),r.a.createElement("td",null,r.a.createElement("strong",null,l.cp))),r.a.createElement("tr",null,r.a.createElement("td",null,"Types"),r.a.createElement("td",null,l.types.map((function(e){return r.a.createElement("span",{key:e,className:i(e)},e)})))),r.a.createElement("tr",null,r.a.createElement("td",null,"Date de cr\xe9ation"),r.a.createElement("td",null,s(l.created)))))),r.a.createElement("div",{className:"card-action"},r.a.createElement(h.b,{to:"/"},"Retour")))))):r.a.createElement("h4",{className:"center"},r.a.createElement(b,null)))},N=function(){return r.a.createElement("div",{className:"center"},r.a.createElement("img",{src:"https://assets.pokemon.com/assets/cms2/img/pokedex/full/209.png",alt:"Page non trouv\xe9e"}),r.a.createElement("h1",null,"Hey, cette page n'existe pas !"),r.a.createElement(h.b,{to:"/",className:"waves-effect waves-teal btn-flat"},"Retourner \xe0 l'accueil"))},k=t(2),j=t(12),O=t(17),y=function(e){var a=e.pokemon,t=e.isEditForm,c=Object(m.g)(),l=Object(n.useState)({picture:{value:a.picture},name:{value:a.name,isValid:!0},hp:{value:a.hp,isValid:!0},cp:{value:a.cp,isValid:!0},types:{value:a.types,isValid:!0}}),s=Object(o.a)(l,2),u=s[0],d=s[1],p=function(e){return u.types.value.includes(e)},h=function(e){var a=e.target.name,t=e.target.value,n=Object(j.a)({},a,{value:t});d(Object(k.a)(Object(k.a)({},u),n))},E=function(){v.addPokemon(a).then((function(){return c.push("/pokemons")}))},f=function(){v.updatePokemon(a).then((function(){return c.push("/pokemons/".concat(a.id))}))},b=function(){return!t},g=function(){var e=u;if(b()){if(u.picture.value.startsWith("https://assets.pokemon.com/assets/cms2/img/pokedex/detail/")&&u.picture.value.endsWith(".png")){var a={value:u.picture.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{picture:a})}else{var t={value:u.picture.value,error:"L'url n'est pas valide",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{picture:t})}}if(/^[a-zA-Z\xe0\xe9\xe8 ]{3,25}$/.test(u.name.value)){var n={value:u.name.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{name:n})}else{var r={value:u.name.value,error:"Le nom du pok\xe9mon est obligatoire (1 \xe0 25 caract\xe8res pas de caract\xe8res, sp\xe9ciaux).",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{name:r})}if(/^[0-9]{1,3}$/.test(u.hp.value)){var c={value:u.hp.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{hp:c})}else{var l={value:u.hp.value,error:"Les point de vie doivent \xeatre compris entre 0 et 999.",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{hp:l})}if(/^[0-9]{1,2}$/.test(u.cp.value)){var o={value:u.cp.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{cp:o})}else{var s={value:u.cp.value,error:"Les d\xe9g\xe2ts doivent \xeatre compris entre 0 et 99.",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{cp:s})}return d(e),e.name.isValid&&e.hp.isValid&&e.cp.isValid&&e.picture},N=function(e){return(1!==u.types.value.length||!p(e))&&!(u.types.value.length>=3&&!p(e))};return r.a.createElement("form",{onSubmit:function(e){return function(e){e.preventDefault(),g()&&(a.picture=u.picture.value,a.name=u.name.value,a.hp=u.hp.value,a.cp=u.cp.value,a.types=u.types.value,t?f():E())}(e)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m8 offset-m2"},r.a.createElement("div",{className:"card hoverable"},t&&r.a.createElement("div",{className:"card-image"},r.a.createElement("img",{src:a.picture,alt:a.name,style:{width:"250px",margin:"0 auto"}}),r.a.createElement("span",{className:"btn-floating halfway-fab waves-effect waves-light red"},r.a.createElement("i",{onClick:function(){v.deletePokemon(a).then((function(){return c.push("/pokemons")}))},className:"material-icons"},"delete"))),r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},b()&&r.a.createElement("div",{"data-tip":"Remplacer: xxx par le num\xe9ro du pokemon.",className:"form-group"},r.a.createElement(O.a,{place:"top",type:"error",effect:"float"}),r.a.createElement("label",{htmlFor:"name"},"Image"),r.a.createElement("input",{id:"picture",name:"picture",type:"text",className:"form-control",value:u.picture.value,onChange:function(e){return h(e)}}),u.picture.error&&r.a.createElement("div",{className:"card-panel red accent-1"},u.picture.error)),r.a.createElement("div",{"data-tip":"Remplacer les ... par un nom au choix, soyez cr\xe9atif !",className:"form-group"},r.a.createElement(O.a,{place:"top",type:"error",effect:"float"}),r.a.createElement("label",{htmlFor:"name"},"Nom"),r.a.createElement("input",{id:"name",name:"name",type:"text",className:"form-control",value:u.name.value,onChange:function(e){return h(e)}}),u.name.error&&r.a.createElement("div",{className:"card-panel red accent-1"},u.name.error)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"hp"},"Point de vie"),r.a.createElement("input",{id:"hp",name:"hp",type:"number",className:"form-control",value:u.hp.value,onChange:function(e){return h(e)}}),u.hp.error&&r.a.createElement("div",{className:"card-panel red accent-1"},u.hp.error)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"cp"},"D\xe9g\xe2ts"),r.a.createElement("input",{id:"cp",name:"cp",type:"number",className:"form-control",value:u.cp.value,onChange:function(e){return h(e)}}),u.cp.error&&r.a.createElement("div",{className:"card-panel red accent-1"},u.cp.error)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Types"),["Plante","Feu","Eau","Insecte","Normal","Electrik","Poison","Fe\u0301e","Vol","Combat","Psy"].map((function(e){return r.a.createElement("div",{key:e,style:{marginBottom:"10px"}},r.a.createElement("label",null,r.a.createElement("input",{id:e,type:"checkbox",className:"filled-in",value:e,disabled:!N(e),checked:p(e),onChange:function(a){return function(e,a){var t;a.target.checked?t={value:u.types.value.concat([e])}:t={value:u.types.value.filter((function(a){return a!==e}))};d(Object(k.a)(Object(k.a)({},u),{types:t}))}(e,a)}}),r.a.createElement("span",null,r.a.createElement("p",{className:i(e)},e))))})))),r.a.createElement("div",{className:"card-action center"},r.a.createElement("button",{type:"submit",className:"btn"},"Valider")))))))},w=function(e){var a=e.match,t=Object(n.useState)(null),c=Object(o.a)(t,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){v.getPokemon(+a.params.id).then((function(e){return s(e)}))}),[a.params.id]),r.a.createElement("div",null,l?r.a.createElement("div",{className:"row"},r.a.createElement("h2",{className:"header center"},"\xc9diter ",l.name),r.a.createElement(y,{pokemon:l,isEditForm:!0})):r.a.createElement("h4",{className:"center"},r.a.createElement(b,null)))},x=function e(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"...",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"https://assets.pokemon.com/assets/cms2/img/pokedex/detail/xxx.png",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:["Normal"],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Date;Object(d.a)(this,e),this.id=void 0,this.hp=void 0,this.cp=void 0,this.name=void 0,this.picture=void 0,this.types=void 0,this.created=void 0,this.id=a,this.hp=t,this.cp=n,this.name=r,this.picture=c,this.types=l,this.created=o},P=function(){var e=Object(n.useState)((new Date).getTime()),a=Object(o.a)(e,1)[0],t=Object(n.useState)(new x(a)),c=Object(o.a)(t,1)[0];return r.a.createElement("div",{className:"row"},r.a.createElement("h2",{className:"header center"},"Ajouter un Pok\xe9mon"),r.a.createElement(y,{pokemon:c,isEditForm:!1}))},V=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"login",value:function(e,a){var t=this,n="pichu"===e&&"pichu"===a;return new Promise((function(e){setTimeout((function(){t.isAuthenticated=n,e(n)}),1e3)}))}}]),e}();V.isAuthenticated=!1;var C=function(){var e=Object(m.g)(),a=Object(n.useState)({username:{value:""},password:{value:""}}),t=Object(o.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)("Vous \xeates d\xe9connect\xe9. (pichu / pichu)"),i=Object(o.a)(s,2),u=i[0],d=i[1],p=function(e){var a=e.target.name,t=e.target.value,n=Object(j.a)({},a,{value:t});l(Object(k.a)(Object(k.a)({},c),n))},v=function(a){a.preventDefault(),function(){var e=c;if(c.username.value.length<3){var a={value:c.username.value,error:"Votre pr\xe9nom doit faire au moins 3 caract\xe8res de long.",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{username:a})}else{var t={value:c.username.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{username:t})}if(c.password.value.length<4){var n={value:c.password.value,error:"Votre mot de passe doit faire au moins 4 caract\xe8res de long.",isValid:!1};e=Object(k.a)(Object(k.a)({},e),{password:n})}else{var r={value:c.password.value,error:"",isValid:!0};e=Object(k.a)(Object(k.a)({},e),{password:r})}return l(e),e.username.isValid&&e.password.isValid}()&&(d("\ud83d\udc49 Tentative de connexion en cours ..."),V.login(c.username.value,c.password.value).then((function(a){a?e.push("/pokemons"):d("\ud83d\udd10 Identifiant ou mot de passe incorrect.")})))};return r.a.createElement("form",{onSubmit:function(e){return v(e)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col s12 m8 offset-m2"},r.a.createElement("div",{className:"card hoverable"},r.a.createElement("div",{className:"card-stacked"},r.a.createElement("div",{className:"card-content"},u&&r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"card-panel grey lighten-5"},u)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"username"},"Identifiant"),r.a.createElement("input",{id:"username",type:"text",name:"username",className:"form-control",value:c.username.value,onChange:function(e){return p(e)}}),c.username.error&&r.a.createElement("div",{className:"card-panel red accent-1"},c.username.error)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"Mot de passe"),r.a.createElement("input",{id:"password",type:"password",name:"password",className:"form-control",value:c.password.value,onChange:function(e){return p(e)}}),c.password.error&&r.a.createElement("div",{className:"card-panel red accent-1"},c.password.error))),r.a.createElement("div",{className:"card-action center"},r.a.createElement("button",{type:"submit",className:"btn"},"Valider")))))))},S=t(23),F=["component"],T=function(e){var a=e.component,t=Object(S.a)(e,F);return r.a.createElement(m.b,Object.assign({},t,{render:function(e){return V.isAuthenticated?r.a.createElement(a,e):r.a.createElement(m.a,{to:{pathname:"/login"}})}}))},D=function(){return r.a.createElement(h.a,null,r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper teal"},r.a.createElement(h.b,{to:"/",className:"brand-logo center"},"Pok\xe9d\xe9x"))),r.a.createElement(m.d,null,r.a.createElement(T,{exact:!0,path:"/",component:f}),r.a.createElement(m.b,{exact:!0,path:"/login",component:C}),r.a.createElement(T,{exact:!0,path:"/pokemons",component:f}),r.a.createElement(T,{exact:!0,path:"/pokemons/add",component:P}),r.a.createElement(T,{exact:!0,path:"/pokemons/:id",component:g}),r.a.createElement(T,{exact:!0,path:"/pokemons/edit/:id",component:w}),r.a.createElement(m.b,{component:N}))))};l.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.7adaeb84.chunk.js.map